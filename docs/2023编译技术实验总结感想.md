# 2023编译技术实验总结感想

>作者：严皓钧
>
>学号：21371372

## 一、学习收获

​	编译技术实验可以说是自大学以来开发过的代码量最大、最复杂的项目了，之前的CO、OO等课程每个项目无非都只有2k行左右的代码量。从开学布置词法分析程序到最后的代码优化部分，一步步的迭代开发最终也实现了一个功能完善的编译器。在接近学期的尾声的时候，再回头看看这一个学期的编译技术实验，不禁感叹万分。一个个迷茫、痛苦的日子，变得那么朦胧又不真实。无论如何，毕竟已经基本结束了，在此分享下我一个学期编译技术实验的学习收获。

- 与理论结合最紧密的一门课

​	之前的计算机组成、操作系统以及面向对象，也基本是理论课程 +  实验课程/代码开发，并且二者之间可以说基本没什么关系。但是编译技术不同，理论讲的很多内容，比如说词法分析、代码优化算法等，都是和实验要完成的项目任务紧密联系的。同时，在进行实验代码开发的过程，也是在不断复习理论学到的知识点。看PPT十次的效果，可能都不如真正实现一次吧。这种实验和理论紧密连接的设计，我认为无论是对理论和实验都是十分有意义的事情。

- 面向对象设计

​	现在觉得面向对象在编译技术之前上确实是很有道理的，因为编译实验中涉及到了大量的对编译器的“组件”进行抽象，然后进行面向对象的封装。比如说在进行语法分析的时候，需要为代码生成一个语法生成树，这里便需要面向对象的设计思想为非终结符结点设计相对应的类。在编译技术实验课程中，每一次迭代开发也是锻炼了我的面向对象的设计思想。同时，很多在OO中学到的设计模式，也在编译技术实验中得到了实践，比如说访问者模式和工厂模式。

- 模块化开发

​	模块化指的是把一个大项目进行功能划分，细分为不同的小模块进行开发。其实无论是理论课中学到的编译器的七个关键步骤还是实验每次布置的迭代任务，都蕴含了模块化开发的想法。一个编译器最终可以分为不同的组件，比如词法分析器、语法生成器、中间代码生成器等等。这样模块化开发的方法在工程中也具有很大的用处，不同的后端代码生成组件就可以让编译器的目标代码生成别的汇编语言。只要保证组件之间的接口是一样的，就可以很轻松地更换编译器所使用的具体组件。

- 架构设计与代码重构

​	在开发一个编译器项目中中，代码重构和优化是一个不可或缺的环节。随着项目的功能增加和完善，原有的代码结构可能不再适应新的需求，因此需要对代码进行重构，以提高代码的可读性和可维护性。比如说在LLVM中间代码生成的时候，如果一开始没有设计好合适的架构，很有可能导致代码优化的时候无法推进，也就需要进行重构了。



## 二、对课程改进的意见、建议

- 进一步完善生成LLVM中间代码的教程：因为LLVM具有较为完善的工具链，因此可以对生成的LLVM代码进行正确性判定，这也是我选择生成LLVM代码的原因。但其实从语法分析到生成LLVM中间代码的这一步还是有较大的一个跨度，虽然给的时间也比较充足，但是我认为可以进一步完善LLVM的教程，减少翻译出中间代码LLVM的难度。
- 更换代码优化部分考核方式：我个人一直对类似竞速排行榜的考核方式（包括数据结构的竞速排行榜）持有不同的看法，虽然这确实是检验代码优化效果 / 同学们在代码优化部分中最省事的方式，但是我认为可能存在其他的考核方式能够比竞速排行榜更合适，能够稍微缓和一下内卷程度。



